## 1.什么是同源策略

同源策略就是指协议，域名，端口号三者相同，浏览器就认为这个请求地址是同源的，有一个不同，则认为非同源，同源策略限制访问以下内容：

- Cookie LocationStore SessionStore等资源不共享
- 无法访问DOM节点
- Ajax请求的结果会被浏览器拦截

**特别说明：**

- 如果是协议和端口造成的跨域问题，前端是无能为力的

- 在跨域问题上，浏览器只通过url首部(协议+域名+端口号)来识别，而不会根据域名所对应的IP地址是否相同来判断
- 跨域状态下Ajax请求是可以发出去的，只不过请求的响应被浏览器拦截了

## 2.跨域解决方案

### JSONP

利用`<script>`标签没有跨域限制的漏洞，可以在请求地址中传入一个回调函数名，通过`window`监听这个回调函数，后端执行这个函数并把参数以形参的形式传入发给前端

```js
const script = document.createElement('script');

script.src = 'http://127.0.0.1:3000/say?callback=show';

window.show = function(data) {
    console.log(data)
}
document.body.appendChaild(script)
```

- Nodejs

```js
const express = require('express');
const app = express();

app.get('/say', (req, res) => {
    const { callback } = req.query;
    
    res.send(`${callback}('222')`)
})

app.listen(3000)
```

缺点：仅支持`get`方法



